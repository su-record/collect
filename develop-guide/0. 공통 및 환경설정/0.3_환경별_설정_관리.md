# ğŸ”§ 0.3 í™˜ê²½ë³„ ì„¤ì • ê´€ë¦¬

## ğŸ“‹ ëª©ì°¨
1. [ê°œìš”](#1-ê°œìš”)
2. [Flutter í™˜ê²½ ì„¤ì •](#2-flutter-í™˜ê²½-ì„¤ì •)
3. [Backend í™˜ê²½ ì„¤ì •](#3-backend-í™˜ê²½-ì„¤ì •)
4. [ê²€ì¦](#4-ê²€ì¦)

## 1. ê°œìš”
ë¡œì»¬, ê°œë°œ, ìš´ì˜ í™˜ê²½ì„ ì‰½ê²Œ ì „í™˜í•  ìˆ˜ ìˆë„ë¡ ì„¤ì •í•©ë‹ˆë‹¤.

### ğŸ“Œ í•µì‹¬ í¬ì¸íŠ¸
- âœ… `--dart-define`ìœ¼ë¡œ ì»´íŒŒì¼ íƒ€ì„ í™˜ê²½ ë³€ìˆ˜
- âœ… í™˜ê²½ë³„ API ì—”ë“œí¬ì¸íŠ¸ ìë™ ì „í•’
- âœ… .env íŒŒì¼ë¡œ ë¯¼ê°í•œ ì •ë³´ ê´€ë¦¬

## 2. Flutter í™˜ê²½ ì„¤ì •

### [í•„ìˆ˜] AppConfig í´ë˜ìŠ¤
```dart
// íŒŒì¼: lib/core/config/app_config.dart
class AppConfig {
  final String appEnv;
  final String apiBaseUrl;
  final bool useEmulator;
  final String supabaseUrl;
  
  AppConfig._({
    required this.appEnv,
    required this.apiBaseUrl,
    required this.useEmulator,
    required this.supabaseUrl,
  });
  
  // ì»´íŒŒì¼ íƒ€ì„ í™˜ê²½ ë³€ìˆ˜
  static const String _appEnv = String.fromEnvironment(
    'APP_ENV', 
    defaultValue: 'local'
  );
  
  static const String _apiBaseUrl = String.fromEnvironment(
    'API_BASE_URL',
    defaultValue: 'http://localhost:5000/api'
  );
  
  // Supabase URL
  static const String _supabaseUrl = String.fromEnvironment(
    'SUPABASE_URL',
    defaultValue: 'http://127.0.0.1:54321'  // localhost ëŒ€ì‹  127.0.0.1
  );
  
  // ì‹±ê¸€í†¤ ì¸ìŠ¤í„´ìŠ¤
  static final instance = AppConfig._(
    appEnv: _appEnv,
    apiBaseUrl: _apiBaseUrl,
    useEmulator: _appEnv == 'local',
    supabaseUrl: _supabaseUrl,
  );
  
  // í™˜ê²½ ì²´í¬
  bool get isLocal => appEnv == 'local';
  bool get isDevelopment => appEnv == 'development';
  bool get isProduction => appEnv == 'production';
  
  void printConfig() {
    print('''
    â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
    â•‘ Environment: $appEnv
    â•‘ API URL: $apiBaseUrl
    â•‘ Supabase URL: $supabaseUrl
    â•‘ Use Emulator: $useEmulator
    â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    ''');
  }
}
```

### [í•„ìˆ˜] VS Code ì‹¤í–‰ ì„¤ì •
```json
// íŒŒì¼: .vscode/launch.json
{
  "version": "0.2.0",
  "configurations": [
    {
      "name": "Fallingo (Local)",
      "request": "launch",
      "type": "dart",
      "args": [
        "--dart-define=APP_ENV=local",
        "--dart-define=API_BASE_URL=http://localhost:5000/api",
        "--dart-define=SUPABASE_URL=http://127.0.0.1:54321"
      ]
    },
    {
      "name": "Fallingo (Dev)",
      "request": "launch",
      "type": "dart",
      "args": [
        "--dart-define=APP_ENV=development",
        "--dart-define=API_BASE_URL=https://dev-api.fallingo.com/api"
      ]
    },
    {
      "name": "Fallingo (Prod)",
      "request": "launch",
      "type": "dart",
      "args": [
        "--dart-define=APP_ENV=production",
        "--dart-define=API_BASE_URL=https://api.fallingo.com/api"
      ]
    }
  ]
}
```

### [í•„ìˆ˜] main.dart ì´ˆê¸°í™”
```dart
// íŒŒì¼: lib/main.dart
import 'package:flutter/material.dart';
import 'core/config/app_config.dart';

void main() {
  WidgetsFlutterBinding.ensureInitialized();
  
  final config = AppConfig.instance;
  config.printConfig();
  
  runApp(MyApp());
}

class MyApp extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      title: 'Fallingo ${AppConfig.instance.appEnv}',
      home: Scaffold(
        body: Center(
          child: Text('í™˜ê²½: ${AppConfig.instance.appEnv}'),
        ),
      ),
    );
  }
}
```

### [í•„ìˆ˜] í™˜ê²½ë³„ .env íŒŒì¼
```bash
# frontend/.env (ë¯¼ê°í•œ ì •ë³´ëŠ” ì—¬ê¸°ì—)
APP_ENV=local
API_BASE_URL=http://localhost:5000/api
SUPABASE_URL=http://127.0.0.1:54321
SUPABASE_ANON_KEY=eyJ...

# backend/.env
FLASK_APP=app.py
FLASK_ENV=development
FLASK_DEBUG=1
SUPABASE_URL=http://127.0.0.1:54321
SUPABASE_ANON_KEY=eyJ...
SUPABASE_SERVICE_KEY=eyJ...
```

### [Flutter ì›¹ í”Œë«í¼ ì¶”ê°€]
```bash
# ì›¹ì—ì„œ ì‹¤í–‰í•˜ë ¤ë©´ í”Œë«í¼ ì¶”ê°€ í•„ìš”
cd frontend
flutter create --platforms=web .

# ì›¹ ì‹¤í–‰
flutter run -d chrome --dart-define=APP_ENV=local
```

## 3. Backend í™˜ê²½ ì„¤ì •

### [í•„ìˆ˜] Flask ì„¤ì •
```python
# íŒŒì¼: backend/config/settings.py
import os
from dotenv import load_dotenv

load_dotenv()

class Config:
    """ê¸°ë³¸ ì„¤ì •"""
    SECRET_KEY = os.environ.get('SECRET_KEY', 'dev-key')
    API_PREFIX = '/api'

class LocalConfig(Config):
    """ë¡œì»¬ ì„¤ì •"""
    ENV = 'local'
    DEBUG = True
    USE_MOCK_DATA = True

class DevelopmentConfig(Config):
    """ê°œë°œ ì„¤ì •"""
    ENV = 'development'
    DEBUG = True
    USE_MOCK_DATA = False

class ProductionConfig(Config):
    """ìš´ì˜ ì„¤ì •"""
    ENV = 'production'
    DEBUG = False
    USE_MOCK_DATA = False

config = {
    'local': LocalConfig,
    'development': DevelopmentConfig,
    'production': ProductionConfig,
}
```

### [í•„ìˆ˜] Flask ì•± ì´ˆê¸°í™”
```python
# íŒŒì¼: backend/app.py
from flask import Flask
from flask_cors import CORS
from config.settings import config
import os

def create_app():
    config_name = os.environ.get('FLASK_ENV', 'local')
    
    app = Flask(__name__)
    app.config.from_object(config[config_name])
    
    CORS(app, origins=['http://localhost:*'])
    
    print(f"ğŸš€ Fallingo Backend - Environment: {app.config['ENV']}")
    
    # TODO: Blueprint ë“±ë¡
    
    return app

if __name__ == '__main__':
    app = create_app()
    app.run(host='0.0.0.0', port=5000)
```

## 4. ê²€ì¦

### âœ… ì²´í¬ë¦¬ìŠ¤íŠ¸
- [ ] Flutter í™˜ê²½ë³„ ì‹¤í–‰ ê°€ëŠ¥
- [ ] VS Codeì—ì„œ í™˜ê²½ ì„ íƒ ê°€ëŠ¥
- [ ] Backend í™˜ê²½ë³„ ì„¤ì • ë¡œë“œ
- [ ] í™˜ê²½ ì •ë³´ê°€ ì½˜ì†”ì— ì¶œë ¥

### í…ŒìŠ¤íŠ¸ ëª…ë ¹ì–´
```bash
# ì „ì²´ ì„œë¹„ìŠ¤ í•œë²ˆì— ì‹¤í–‰
./scripts/start_all.sh

# ê°œë³„ ì‹¤í–‰
# Flutter í™˜ê²½ë³„ ì‹¤í–‰
flutter run -d chrome --dart-define=APP_ENV=local
flutter run -d chrome --dart-define=APP_ENV=development

# Backend í™˜ê²½ë³„ ì‹¤í–‰  
export FLASK_ENV=local && python backend/app.py
export FLASK_ENV=development && python backend/app.py
```

### ğŸ’¡ Supabase ë¡œì»¬ í‚¤ ê°’
```
# ë¡œì»¬ ê°œë°œ ì‹œ ê¸°ë³¸ í‚¤ (ëª¨ë“  ë¡œì»¬ í™˜ê²½ì—ì„œ ë™ì¼)
anon key: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZS1kZW1vIiwicm9sZSI6ImFub24iLCJleHAiOjE5ODM4MTI5OTZ9.CRXP1A7WOeoJeXxjNni43kdQwgnWNReilDMblYTn_I0
service_role key: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZS1kZW1vIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImV4cCI6MTk4MzgxMjk5Nn0.EGIM96RAZx35lJzdJsyH-qQwv8Hdp7fsn3W0YpN81IU
```