# ğŸ  0.6 Supabase ë¡œì»¬ ê°œë°œ ì„¤ì •

## ğŸ“‹ ëª©ì°¨

1. [ê°œìš”](#1-ê°œìš”)
2. [ì‚¬ì „ ì¤€ë¹„](#2-ì‚¬ì „-ì¤€ë¹„)
3. [í”„ë¡œì íŠ¸ ì„¤ì •](#3-í”„ë¡œì íŠ¸-ì„¤ì •)
4. [ë¡œì»¬ ì‹¤í–‰](#4-ë¡œì»¬-ì‹¤í–‰)
5. [ê²€ì¦](#5-ê²€ì¦)

## 1. ê°œìš”

Supabase ë¡œì»¬ í™˜ê²½ì„ êµ¬ì¶•í•˜ì—¬ í´ë¼ìš°ë“œ ì˜ì¡´ ì—†ì´ ê°œë°œí•©ë‹ˆë‹¤.

### ğŸ“Œ í•µì‹¬ í¬ì¸íŠ¸

- âœ… Docker ê¸°ë°˜ ë¡œì»¬ í™˜ê²½
- âœ… ëª¨ë“  ê¸°ëŠ¥ ë¡œì»¬ í…ŒìŠ¤íŠ¸ ê°€ëŠ¥
- âœ… í´ë¼ìš°ë“œì™€ ë™ì¼í•œ í™˜ê²½

## 2. ì‚¬ì „ ì¤€ë¹„

### [í•„ìˆ˜] Docker ì„¤ì¹˜

```bash
# Docker ë²„ì „ í™•ì¸
docker --version  # 20.10.0 ì´ìƒ
docker-compose --version  # 2.0.0 ì´ìƒ

# Node.js ë²„ì „ í™•ì¸
node --version  # v16.0.0 ì´ìƒ
```

### [í•„ìˆ˜] Supabase CLI ì„¤ì¹˜

```bash
# npmìœ¼ë¡œ ì„¤ì¹˜
npm install -g supabase

# ì„¤ì¹˜ í™•ì¸
supabase --version
```

## 3. í”„ë¡œì íŠ¸ ì„¤ì •

### [í•„ìˆ˜] Supabase ì´ˆê¸°í™”

```bash
# í”„ë¡œì íŠ¸ ë£¨íŠ¸ì—ì„œ ì‹¤í–‰
cd fallingo
supabase init
```

### [í•„ìˆ˜] ì„¤ì • íŒŒì¼

```toml
# íŒŒì¼: supabase/config.toml
[project]
id = "fallingo-local"

[api]
port = 54321
schemas = ["public", "storage", "auth"]

[db]
port = 54322
major_version = 15

[studio]
port = 54323

[auth]
site_url = "http://localhost:3000"
additional_redirect_urls = ["http://localhost:3000/auth/callback"]

[auth.email]
enable_signup = true
enable_confirmations = false

[auth.external.google]
enabled = true
client_id = "env(GOOGLE_CLIENT_ID)"
secret = "env(GOOGLE_CLIENT_SECRET)"
```

### [í•„ìˆ˜] í™˜ê²½ ë³€ìˆ˜

```bash
# íŒŒì¼: .env.local
# Supabase
NEXT_PUBLIC_SUPABASE_URL=http://localhost:54321
NEXT_PUBLIC_SUPABASE_ANON_KEY=your-anon-key
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key

# Google Maps
NEXT_PUBLIC_GOOGLE_MAPS_API_KEY=your-google-maps-key

# Google OAuth (ê°œë°œìš©)
GOOGLE_CLIENT_ID=your-google-client-id
GOOGLE_CLIENT_SECRET=your-google-client-secret
```

## 4. ë¡œì»¬ ì‹¤í–‰

### [í•„ìˆ˜] Supabase ì‹œì‘

```bash
# Docker ì»¨í…Œì´ë„ˆ ì‹œì‘
supabase start

# ì¶œë ¥ë˜ëŠ” ì •ë³´ ì €ì¥:
# API URL: http://localhost:54321
# DB URL: postgresql://postgres:postgres@localhost:54322/postgres
# Studio URL: http://localhost:54323
# anon key: eyJ...
# service_role key: eyJ...
```

### [í•„ìˆ˜] ë°ì´í„°ë² ì´ìŠ¤ ì„¤ì •

```bash
# PostGIS ì„¤ì¹˜ SQL ì‹¤í–‰
supabase db push

# ì‹œë“œ ë°ì´í„° ì‹¤í–‰
psql -h localhost -p 54322 -U postgres -d postgres -f supabase/seed.sql
```

### [ì„ íƒ] Studio ì ‘ì†

```bash
# ë¸Œë¼ìš°ì €ì—ì„œ ì—´ê¸°
open http://localhost:54323

# Studioì—ì„œ ê°€ëŠ¥í•œ ì‘ì—…:
# - í…Œì´ë¸” ë°ì´í„° ì¡°íšŒ/ìˆ˜ì •
# - SQL ì¿¼ë¦¬ ì‹¤í–‰
# - RLS ì •ì±… í…ŒìŠ¤íŠ¸
```

## 5. ê²€ì¦

### âœ… ì²´í¬ë¦¬ìŠ¤íŠ¸

- [ ] `supabase start` ì„±ê³µ
- [ ] Studio ì ‘ì† ê°€ëŠ¥
- [ ] PostGIS í™•ì¥ ì„¤ì¹˜ë¨
- [ ] í…Œì´ë¸” ìƒì„± ì™„ë£Œ
- [ ] RLS ì •ì±… ì ìš©ë¨

### ğŸ§ª ì—°ê²° í…ŒìŠ¤íŠ¸

```javascript
// íŒŒì¼: test/supabase_connection.js
import { createClient } from "@supabase/supabase-js";

const supabase = createClient("http://localhost:54321", "your-anon-key");

// ì—°ê²° í…ŒìŠ¤íŠ¸
async function testConnection() {
  const { data, error } = await supabase.from("users").select("count");

  if (error) {
    console.error("ì—°ê²° ì‹¤íŒ¨:", error);
  } else {
    console.log("ì—°ê²° ì„±ê³µ!");
  }
}

testConnection();
```

### ğŸ› ï¸ ìì£¼ ì‚¬ìš©í•˜ëŠ” ëª…ë ¹ì–´

```bash
# ìƒíƒœ í™•ì¸
supabase status

# ë¡œê·¸ ë³´ê¸°
supabase logs

# DB ë¦¬ì…‹
supabase db reset

# ì¤‘ì§€
supabase stop

# ì™„ì „ ì´ˆê¸°í™”
supabase stop --no-backup
rm -rf .supabase
supabase init
supabase start
```
