# ğŸŒ 2.1 REST API ì—”ë“œí¬ì¸íŠ¸ ëª…ì„¸

## ğŸ“‹ ëª©ì°¨
1. [ê°œìš”](#1-ê°œìš”)
2. [ì¸ì¦ API](#2-ì¸ì¦-api)
3. [ì‚¬ìš©ì API](#3-ì‚¬ìš©ì-api)
4. [í”¼ë“œ API](#4-í”¼ë“œ-api)
5. [ê²€ì¦](#5-ê²€ì¦)

## 1. ê°œìš”
Fallingo ë°±ì—”ë“œ REST APIì˜ ëª¨ë“  ì—”ë“œí¬ì¸íŠ¸ë¥¼ ì •ì˜í•©ë‹ˆë‹¤.

### ğŸ“Œ í•µì‹¬ í¬ì¸íŠ¸
- âœ… RESTful ì„¤ê³„ ì›ì¹™
- âœ… ì¼ê´€ëœ ì‘ë‹µ í˜•ì‹
- âœ… í˜ì´ì§€ë„¤ì´ì…˜ ì§€ì›

### [í•„ìˆ˜] ê¸°ë³¸ ì •ë³´
```
Base URL: http://localhost:5000/api (local)
         https://api.fallingo.com/api (production)
         
Headers:
  Content-Type: application/json
  Authorization: Bearer {token}  # ì¸ì¦ í•„ìš” ì‹œ
```

## 2. ì¸ì¦ API

### [í•„ìˆ˜] ì¸ì¦ ì—”ë“œí¬ì¸íŠ¸
```yaml
# ì†Œì…œ ë¡œê·¸ì¸
POST /auth/login
Body:
  provider: "google" | "apple"
  idToken: string
Response:
  {
    "status": "success",
    "data": {
      "accessToken": "jwt_token",
      "refreshToken": "refresh_token",
      "user": {
        "id": "user123",
        "email": "user@example.com",
        "nickname": "ë§›ì§‘íƒí—˜ê°€",
        "grade": "bibimbap",
        "isNewUser": false
      }
    }
  }

# í† í° ê°±ì‹ 
POST /auth/refresh
Body:
  refreshToken: string
Response:
  {
    "status": "success",
    "data": {
      "accessToken": "new_jwt_token"
    }
  }

# ë¡œê·¸ì•„ì›ƒ
POST /auth/logout
Headers:
  Authorization: Bearer {token}
Response:
  {
    "status": "success",
    "message": "ë¡œê·¸ì•„ì›ƒë˜ì—ˆìŠµë‹ˆë‹¤"
  }
```

## 3. ì‚¬ìš©ì API

### [í•„ìˆ˜] ì‚¬ìš©ì í”„ë¡œí•„
```yaml
# ë‚´ í”„ë¡œí•„ ì¡°íšŒ
GET /users/me
Headers:
  Authorization: Bearer {token}
Response:
  {
    "status": "success",
    "data": {
      "id": "user123",
      "email": "user@example.com",
      "nickname": "ë§›ì§‘íƒí—˜ê°€",
      "profileImageUrl": "https://...",
      "grade": "bibimbap",
      "activityPoints": 150,
      "stats": {
        "totalFeeds": 10,
        "totalRecommends": 45,
        "totalFollowers": 23
      }
    }
  }

# í”„ë¡œí•„ ìˆ˜ì •
PATCH /users/me
Headers:
  Authorization: Bearer {token}
Body:
  nickname?: string
  profileImageUrl?: string
Response:
  {
    "status": "success",
    "data": { /* ìˆ˜ì •ëœ ì‚¬ìš©ì ì •ë³´ */ }
  }

# ë‹¤ë¥¸ ì‚¬ìš©ì ì¡°íšŒ
GET /users/{userId}
Response:
  {
    "status": "success",
    "data": { /* ê³µê°œ í”„ë¡œí•„ ì •ë³´ */ }
  }

# íŒ”ë¡œìš°
POST /users/{userId}/follow
Headers:
  Authorization: Bearer {token}
Response:
  {
    "status": "success",
    "message": "íŒ”ë¡œìš°í–ˆìŠµë‹ˆë‹¤"
  }
```

## 4. í”¼ë“œ API

### [í•„ìˆ˜] í”¼ë“œ CRUD
```yaml
# í”¼ë“œ ëª©ë¡ ì¡°íšŒ
GET /feeds
Query Parameters:
  lat?: number          # ìœ„ì¹˜ í•„í„°
  lng?: number
  radius?: number       # ë°˜ê²½(km)
  category?: string     # ì¹´í…Œê³ ë¦¬
  tags?: string         # ì½¤ë§ˆ êµ¬ë¶„ íƒœê·¸
  userId?: string       # íŠ¹ì • ì‚¬ìš©ì
  page?: number         # í˜ì´ì§€ (ê¸°ë³¸: 1)
  limit?: number        # í˜ì´ì§€ë‹¹ ê°œìˆ˜ (ê¸°ë³¸: 20)
Response:
  {
    "status": "success",
    "data": {
      "feeds": [
        {
          "id": "feed123",
          "userId": "user123",
          "restaurantId": "rest456",
          "menuId": "menu789",
          "imageUrls": ["https://..."],
          "content": "ë§›ìˆì–´ìš”!",
          "tags": ["ë§¤ìš´ë§›", "ê°€ì„±ë¹„"],
          "recommendCount": 42,
          "location": {
            "lat": 37.5665,
            "lng": 126.9780,
            "address": "ì„œìš¸ì‹œ ê°•ë‚¨êµ¬"
          },
          "createdAt": "2024-01-01T12:00:00Z",
          "author": { /* ì‚¬ìš©ì ì •ë³´ */ },
          "restaurant": { /* ë§›ì§‘ ì •ë³´ */ },
          "menu": { /* ë©”ë‰´ ì •ë³´ */ }
        }
      ],
      "pagination": {
        "page": 1,
        "limit": 20,
        "total": 100,
        "hasNext": true
      }
    }
  }

# í”¼ë“œ ìƒì„¸ ì¡°íšŒ
GET /feeds/{feedId}
Response:
  {
    "status": "success",
    "data": { /* í”¼ë“œ ìƒì„¸ ì •ë³´ */ }
  }

# í”¼ë“œ ë“±ë¡
POST /feeds
Headers:
  Authorization: Bearer {token}
Body:
  restaurantId: string
  menuId: string
  imageUrls: string[]
  content: string
  tags: string[]
  location: {
    lat: number
    lng: number
    address: string
  }
Response:
  {
    "status": "success",
    "data": { /* ìƒì„±ëœ í”¼ë“œ ì •ë³´ */ }
  }

# í”¼ë“œ ìˆ˜ì •
PATCH /feeds/{feedId}
Headers:
  Authorization: Bearer {token}
Body:
  content?: string
  tags?: string[]
Response:
  {
    "status": "success",
    "data": { /* ìˆ˜ì •ëœ í”¼ë“œ ì •ë³´ */ }
  }

# í”¼ë“œ ì‚­ì œ
DELETE /feeds/{feedId}
Headers:
  Authorization: Bearer {token}
Response:
  {
    "status": "success",
    "message": "ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤"
  }
```

### [í•„ìˆ˜] ì¶”ì²œ ë° ëŒ“ê¸€
```yaml
# ì¶”ì²œí•˜ê¸°
POST /feeds/{feedId}/recommend
Headers:
  Authorization: Bearer {token}
Response:
  {
    "status": "success",
    "data": {
      "recommendCount": 43
    }
  }

# ì¶”ì²œ ì·¨ì†Œ
DELETE /feeds/{feedId}/recommend
Headers:
  Authorization: Bearer {token}
Response:
  {
    "status": "success",
    "data": {
      "recommendCount": 42
    }
  }

# ëŒ“ê¸€ ëª©ë¡
GET /feeds/{feedId}/comments
Query Parameters:
  page?: number
  limit?: number
Response:
  {
    "status": "success",
    "data": {
      "comments": [
        {
          "id": "comment123",
          "userId": "user456",
          "content": "ì €ë„ ê°€ë´¤ëŠ”ë° ë§›ìˆì–´ìš”!",
          "createdAt": "2024-01-01T13:00:00Z",
          "author": { /* ì‚¬ìš©ì ì •ë³´ */ }
        }
      ],
      "pagination": { /* í˜ì´ì§€ ì •ë³´ */ }
    }
  }

# ëŒ“ê¸€ ì‘ì„±
POST /feeds/{feedId}/comments
Headers:
  Authorization: Bearer {token}
Body:
  content: string
Response:
  {
    "status": "success",
    "data": { /* ìƒì„±ëœ ëŒ“ê¸€ ì •ë³´ */ }
  }
```

### [í•„ìˆ˜] ê²€ìƒ‰ ë° ë­í‚¹
```yaml
# ê²€ìƒ‰
GET /search
Query Parameters:
  q: string            # ê²€ìƒ‰ì–´
  type: "feed" | "restaurant" | "menu"
  lat?: number
  lng?: number
  radius?: number
Response:
  {
    "status": "success",
    "data": {
      "results": [ /* ê²€ìƒ‰ ê²°ê³¼ */ ],
      "total": 50
    }
  }

# ë­í‚¹
GET /rankings
Query Parameters:
  category: "all" | "korean" | "chinese" | ...
  region?: string      # ì§€ì—­ ì½”ë“œ
  period?: "daily" | "weekly" | "monthly"
Response:
  {
    "status": "success",
    "data": {
      "rankings": [
        {
          "rank": 1,
          "menuId": "menu123",
          "menuName": "ê¹€ì¹˜ì°Œê°œ",
          "restaurantName": "ë§›ìˆëŠ”ì§‘",
          "recommendCount": 234,
          "change": 2  # ìˆœìœ„ ë³€ë™
        }
      ],
      "updatedAt": "2024-01-01T12:00:00Z"
    }
  }
```

## 5. ê²€ì¦

### âœ… ì²´í¬ë¦¬ìŠ¤íŠ¸
- [ ] ëª¨ë“  ì—”ë“œí¬ì¸íŠ¸ê°€ RESTfulí•œê°€?
- [ ] ì‘ë‹µ í˜•ì‹ì´ ì¼ê´€ë˜ëŠ”ê°€?
- [ ] ì—ëŸ¬ ì‘ë‹µì´ ì •ì˜ë˜ì—ˆëŠ”ê°€?
- [ ] í˜ì´ì§€ë„¤ì´ì…˜ì´ êµ¬í˜„ë˜ì—ˆëŠ”ê°€?

### API í…ŒìŠ¤íŠ¸
```bash
# ë¡œê·¸ì¸ í…ŒìŠ¤íŠ¸
curl -X POST http://localhost:5000/api/auth/login \
  -H "Content-Type: application/json" \
  -d '{"provider":"google","idToken":"test_token"}'

# í”¼ë“œ ì¡°íšŒ í…ŒìŠ¤íŠ¸
curl http://localhost:5000/api/feeds?lat=37.5665&lng=126.9780&radius=1
```