# ğŸ¯ 6.3 ìŠ¤í”Œë˜ì‹œ í™”ë©´ êµ¬í˜„

## ğŸ“‹ ëª©ì°¨

1. [ê°œìš”](#1-ê°œìš”)
2. [ë‚ ì”¨ API ì—°ë™](#2-ë‚ ì”¨-api-ì—°ë™)
3. [ìŠ¤í”Œë˜ì‹œ UI êµ¬í˜„](#3-ìŠ¤í”Œë˜ì‹œ-ui-êµ¬í˜„)
4. [ë‚ ì”¨ë³„ ë°°ê²½ íš¨ê³¼](#4-ë‚ ì”¨ë³„-ë°°ê²½-íš¨ê³¼)
5. [í”¼ë“œ ë°”ë¡œê°€ê¸°](#5-í”¼ë“œ-ë°”ë¡œê°€ê¸°)
6. [ê²€ì¦](#6-ê²€ì¦)

## 1. ê°œìš”

ì•± ì‹¤í–‰ ì‹œ ì²« í™”ë©´ì¸ ìŠ¤í”Œë˜ì‹œ í™”ë©´ì„ êµ¬í˜„í•©ë‹ˆë‹¤. ì‚¬ìš©ìì˜ ìœ„ì¹˜ ê¸°ë°˜ ë‚ ì”¨ ì •ë³´ë¥¼ í‘œì‹œí•˜ê³ , ë™ì ì¸ ë°°ê²½ íš¨ê³¼ë¡œ ì‹œê°ì  ì¦ê±°ì›€ì„ ì œê³µí•©ë‹ˆë‹¤.

### ğŸ“Œ í•µì‹¬ í¬ì¸íŠ¸

- âœ… ìœ„ì¹˜ ê¸°ë°˜ ë‚ ì”¨ ì •ë³´ í‘œì‹œ
- âœ… ë‚ ì”¨ë³„ ë™ì  ë°°ê²½ íš¨ê³¼
- âœ… ë¡œê·¸ì¸ ì‚¬ìš©ììš© í”¼ë“œ ë°”ë¡œê°€ê¸° ë²„íŠ¼

## 2. ë‚ ì”¨ API ì—°ë™

### [í•„ìˆ˜] ë‚ ì”¨ ì„œë¹„ìŠ¤ êµ¬í˜„

```dart
// íŒŒì¼: lib/data/services/weather_service.dart
import 'package:dio/dio.dart';
import 'package:geolocator/geolocator.dart';
import '../models/weather.dart';
import '../../core/config/app_config.dart';

class WeatherService {
  final Dio _dio = Dio();

  Future<WeatherModel> getCurrentWeather() async {
    try {
      // í˜„ì¬ ìœ„ì¹˜ ê°€ì ¸ì˜¤ê¸°
      final position = await _getCurrentPosition();

      // Mock í™˜ê²½ì—ì„œëŠ” ì„œìš¸ ë‚ ì”¨ ë°˜í™˜
      if (AppConfig.current.isLocal) {
        return _getMockWeather();
      }

      // ì‹¤ì œ API í˜¸ì¶œ
      final response = await _dio.get(
        '${AppConfig.current.apiBaseUrl}/weather',
        queryParameters: {
          'latitude': position.latitude,
          'longitude': position.longitude,
        },
      );

      return WeatherModel.fromJson(response.data);
    } catch (e) {
      // ì˜¤ë¥˜ ì‹œ ê¸°ë³¸ ë‚ ì”¨ ë°˜í™˜
      return _getDefaultWeather();
    }
  }

  Future<Position> _getCurrentPosition() async {
    final serviceEnabled = await Geolocator.isLocationServiceEnabled();
    if (!serviceEnabled) {
      return _getDefaultPosition();
    }

    LocationPermission permission = await Geolocator.checkPermission();
    if (permission == LocationPermission.denied) {
      permission = await Geolocator.requestPermission();
      if (permission == LocationPermission.denied) {
        return _getDefaultPosition();
      }
    }

    return await Geolocator.getCurrentPosition();
  }

  Position _getDefaultPosition() {
    // ì„œìš¸ ì‹œì²­ ì¢Œí‘œ
    return Position(
      latitude: 37.5665,
      longitude: 126.9780,
      timestamp: DateTime.now(),
      accuracy: 0,
      altitude: 0,
      heading: 0,
      speed: 0,
      speedAccuracy: 0,
      altitudeAccuracy: 0,
      headingAccuracy: 0,
    );
  }

  WeatherModel _getMockWeather() {
    return WeatherModel(
      temperature: 22.0,
      weatherCode: 0, // ë§‘ìŒ
      location: 'ì„œìš¸íŠ¹ë³„ì‹œ',
      condition: WeatherCondition.clear,
    );
  }

  WeatherModel _getDefaultWeather() {
    return WeatherModel(
      temperature: 20.0,
      weatherCode: 0,
      location: 'í˜„ì¬ ìœ„ì¹˜',
      condition: WeatherCondition.clear,
    );
  }
}
```

### [í•„ìˆ˜] ë‚ ì”¨ ëª¨ë¸

```dart
// íŒŒì¼: lib/models/weather.dart
enum WeatherCondition {
  heatwave,  // í­ì—¼
  coldwave,  // í•œíŒŒ
  rain,      // ë¹„
  snow,      // ëˆˆ
  cloudy,    // íë¦¼
  clear,     // ë§‘ìŒ
}

class WeatherModel {
  final double temperature;
  final int weatherCode;
  final String location;
  final WeatherCondition condition;

  WeatherModel({
    required this.temperature,
    required this.weatherCode,
    required this.location,
    required this.condition,
  });

  factory WeatherModel.fromJson(Map<String, dynamic> json) {
    final temp = json['temperature']?.toDouble() ?? 20.0;
    final code = json['weather_code'] ?? 0;

    return WeatherModel(
      temperature: temp,
      weatherCode: code,
      location: json['location'] ?? 'í˜„ì¬ ìœ„ì¹˜',
      condition: _getCondition(temp, code),
    );
  }

  static WeatherCondition _getCondition(double temp, int code) {
    if (temp >= 30) return WeatherCondition.heatwave;
    if (temp <= -10) return WeatherCondition.coldwave;
    if (code >= 51 && code <= 67) return WeatherCondition.rain;
    if (code >= 71 && code <= 86) return WeatherCondition.snow;
    if (code >= 1 && code <= 3) return WeatherCondition.cloudy;
    return WeatherCondition.clear;
  }

  String get conditionText {
    switch (condition) {
      case WeatherCondition.heatwave:
        return 'í­ì—¼ ì£¼ì˜! ğŸ¥µ';
      case WeatherCondition.coldwave:
        return 'í•œíŒŒ ì£¼ì˜! ğŸ¥¶';
      case WeatherCondition.rain:
        return 'ë¹„ê°€ ì™€ìš” â˜”';
      case WeatherCondition.snow:
        return 'ëˆˆì´ ì™€ìš” â„ï¸';
      case WeatherCondition.cloudy:
        return 'êµ¬ë¦„ ë§ìŒ â˜ï¸';
      case WeatherCondition.clear:
        return 'ë§‘ìŒ â˜€ï¸';
    }
  }
}
```

## 3. ìŠ¤í”Œë˜ì‹œ UI êµ¬í˜„

### [í•„ìˆ˜] ìŠ¤í”Œë˜ì‹œ í™”ë©´

```dart
// íŒŒì¼: lib/feature/splash/presentation/screens/splash_screen.dart
import 'package:flutter/material.dart';
import 'package:go_router/go_router.dart';
import 'package:provider/provider.dart';
import '../../../data/services/weather_service.dart';
import '../../../data/models/weather.dart';
import '../../providers/auth_provider.dart';
import 'widgets/weather_background.dart';
import 'widgets/feed_shortcut_button.dart';

class SplashScreen extends StatefulWidget {
  const SplashScreen({super.key});

  @override
  State<SplashScreen> createState() => _SplashScreenState();
}

class _SplashScreenState extends State<SplashScreen>
    with SingleTickerProviderStateMixin {
  final WeatherService _weatherService = WeatherService();
  WeatherModel? _weather;
  late AnimationController _animationController;
  late Animation<double> _fadeAnimation;

  @override
  void initState() {
    super.initState();
    _animationController = AnimationController(
      duration: const Duration(seconds: 2),
      vsync: this,
    );
    _fadeAnimation = Tween<double>(
      begin: 0.0,
      end: 1.0,
    ).animate(CurvedAnimation(
      parent: _animationController,
      curve: Curves.easeIn,
    ));

    _initializeApp();
  }

  Future<void> _initializeApp() async {
    // ë‚ ì”¨ ì •ë³´ ê°€ì ¸ì˜¤ê¸°
    final weather = await _weatherService.getCurrentWeather();
    setState(() {
      _weather = weather;
    });

    _animationController.forward();

    // 2ì´ˆ í›„ ìë™ ì´ë™
    await Future.delayed(const Duration(seconds: 2));

    if (mounted) {
      final authProvider = context.read<AuthProvider>();
      if (authProvider.isLoggedIn) {
        context.go('/main');
      } else {
        context.go('/login');
      }
    }
  }

  @override
  void dispose() {
    _animationController.dispose();
    super.dispose();
  }

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      body: Stack(
        children: [
          // ë‚ ì”¨ë³„ ë°°ê²½
          if (_weather != null)
            WeatherBackground(condition: _weather!.condition),

          // ë©”ì¸ ì½˜í…ì¸ 
          SafeArea(
            child: FadeTransition(
              opacity: _fadeAnimation,
              child: Column(
                children: [
                  const Spacer(),

                  // ë¡œê³ 
                  Container(
                    width: 120,
                    height: 120,
                    decoration: BoxDecoration(
                      color: Colors.white,
                      shape: BoxShape.circle,
                      boxShadow: [
                        BoxShadow(
                          color: Colors.black.withOpacity(0.1),
                          blurRadius: 20,
                          offset: const Offset(0, 10),
                        ),
                      ],
                    ),
                    child: const Center(
                      child: Text(
                        'ğŸ½ï¸',
                        style: TextStyle(fontSize: 60),
                      ),
                    ),
                  ),

                  const SizedBox(height: 24),

                  // ì•± ì´ë¦„
                  const Text(
                    'Fallingo',
                    style: TextStyle(
                      fontSize: 36,
                      fontWeight: FontWeight.bold,
                      color: Colors.white,
                      shadows: [
                        Shadow(
                          offset: Offset(0, 2),
                          blurRadius: 4,
                          color: Colors.black26,
                        ),
                      ],
                    ),
                  ),

                  const SizedBox(height: 8),

                  // ìŠ¬ë¡œê±´
                  const Text(
                    'ë§›ì— ë¹ ì ¸ë“¤ì–´, í•¨ê»˜ ë– ë‚˜ëŠ” ë¯¸ì‹ ì—¬ì •',
                    style: TextStyle(
                      fontSize: 16,
                      color: Colors.white,
                      shadows: [
                        Shadow(
                          offset: Offset(0, 1),
                          blurRadius: 2,
                          color: Colors.black26,
                        ),
                      ],
                    ),
                  ),

                  const Spacer(),

                  // ë‚ ì”¨ ì •ë³´
                  if (_weather != null) ...[
                    Container(
                      padding: const EdgeInsets.symmetric(
                        horizontal: 24,
                        vertical: 16,
                      ),
                      margin: const EdgeInsets.symmetric(horizontal: 32),
                      decoration: BoxDecoration(
                        color: Colors.white.withOpacity(0.9),
                        borderRadius: BorderRadius.circular(16),
                      ),
                      child: Column(
                        children: [
                          Text(
                            _weather!.location,
                            style: const TextStyle(
                              fontSize: 18,
                              fontWeight: FontWeight.bold,
                            ),
                          ),
                          const SizedBox(height: 8),
                          Text(
                            '${_weather!.temperature.round()}Â°C',
                            style: const TextStyle(
                              fontSize: 32,
                              fontWeight: FontWeight.bold,
                              color: Colors.orange,
                            ),
                          ),
                          Text(
                            _weather!.conditionText,
                            style: const TextStyle(fontSize: 16),
                          ),
                        ],
                      ),
                    ),
                  ],

                  const SizedBox(height: 32),

                  // í”¼ë“œ ë°”ë¡œê°€ê¸° ë²„íŠ¼ (ë¡œê·¸ì¸ ì‚¬ìš©ìë§Œ)
                  Consumer<AuthProvider>(
                    builder: (context, authProvider, _) {
                      if (authProvider.isLoggedIn) {
                        return const FeedShortcutButton();
                      }
                      return const SizedBox(height: 80);
                    },
                  ),

                  const SizedBox(height: 32),
                ],
              ),
            ),
          ),
        ],
      ),
    );
  }
}
```

## 4. ë‚ ì”¨ë³„ ë°°ê²½ íš¨ê³¼

### [í•„ìˆ˜] ë‚ ì”¨ ë°°ê²½ ìœ„ì ¯

```dart
// íŒŒì¼: lib/feature/splash/presentation/widgets/weather_background.dart
import 'package:flutter/material.dart';
import '../../data/models/weather.dart';

class WeatherBackground extends StatelessWidget {
  final WeatherCondition condition;

  const WeatherBackground({
    super.key,
    required this.condition,
  });

  @override
  Widget build(BuildContext context) {
    return Container(
      decoration: BoxDecoration(
        gradient: _getGradient(),
      ),
      child: _getOverlay(),
    );
  }

  LinearGradient _getGradient() {
    switch (condition) {
      case WeatherCondition.heatwave:
        return const LinearGradient(
          begin: Alignment.topCenter,
          end: Alignment.bottomCenter,
          colors: [
            Color(0xFFFF6B35),
            Color(0xFFFF8C5A),
            Color(0xFFFFB347),
          ],
        );
      case WeatherCondition.coldwave:
        return const LinearGradient(
          begin: Alignment.topCenter,
          end: Alignment.bottomCenter,
          colors: [
            Color(0xFF4A90E2),
            Color(0xFF7BB3F0),
            Color(0xFFADD8E6),
          ],
        );
      case WeatherCondition.rain:
        return const LinearGradient(
          begin: Alignment.topCenter,
          end: Alignment.bottomCenter,
          colors: [
            Color(0xFF5D6D7E),
            Color(0xFF85929E),
            Color(0xFFAEB6BF),
          ],
        );
      case WeatherCondition.snow:
        return const LinearGradient(
          begin: Alignment.topCenter,
          end: Alignment.bottomCenter,
          colors: [
            Color(0xFFE8F8F5),
            Color(0xFFD5DBDB),
            Color(0xFFBFC9CA),
          ],
        );
      case WeatherCondition.cloudy:
        return const LinearGradient(
          begin: Alignment.topCenter,
          end: Alignment.bottomCenter,
          colors: [
            Color(0xFFBDC3C7),
            Color(0xFFECF0F1),
            Color(0xFFD5D8DC),
          ],
        );
      case WeatherCondition.clear:
        return const LinearGradient(
          begin: Alignment.topCenter,
          end: Alignment.bottomCenter,
          colors: [
            Color(0xFF87CEEB),
            Color(0xFFFFE5B4),
            Color(0xFFFFA500),
          ],
        );
    }
  }

  Widget? _getOverlay() {
    // ë‚ ì”¨ë³„ ì¶”ê°€ íš¨ê³¼ (ì¶”í›„ ì• ë‹ˆë©”ì´ì…˜ ì¶”ê°€ ê°€ëŠ¥)
    switch (condition) {
      case WeatherCondition.rain:
        return Container(
          decoration: BoxDecoration(
            color: Colors.black.withOpacity(0.1),
          ),
        );
      case WeatherCondition.snow:
        return Container(
          decoration: BoxDecoration(
            color: Colors.white.withOpacity(0.2),
          ),
        );
      default:
        return null;
    }
  }
}
```

## 5. í”¼ë“œ ë°”ë¡œê°€ê¸°

### [í•„ìˆ˜] ë°”ë¡œê°€ê¸° ë²„íŠ¼

```dart
// íŒŒì¼: lib/feature/splash/presentation/widgets/feed_shortcut_button.dart
import 'package:flutter/material.dart';
import 'package:go_router/go_router.dart';

class FeedShortcutButton extends StatelessWidget {
  const FeedShortcutButton({super.key});

  @override
  Widget build(BuildContext context) {
    return Padding(
      padding: const EdgeInsets.symmetric(horizontal: 32),
      child: ElevatedButton(
        onPressed: () {
          context.go('/main');
          // í”¼ë“œ ë“±ë¡ í™”ë©´ ì—´ê¸°
          Future.delayed(const Duration(milliseconds: 300), () {
            Navigator.pushNamed(context, '/feed/create');
          });
        },
        style: ElevatedButton.styleFrom(
          backgroundColor: Colors.orange,
          foregroundColor: Colors.white,
          minimumSize: const Size(double.infinity, 56),
          shape: RoundedRectangleBorder(
            borderRadius: BorderRadius.circular(28),
          ),
          elevation: 8,
          shadowColor: Colors.orange.withOpacity(0.5),
        ),
        child: const Row(
          mainAxisAlignment: MainAxisAlignment.center,
          children: [
            Icon(Icons.camera_alt, size: 24),
            SizedBox(width: 8),
            Text(
              'ì§€ê¸ˆ ë°”ë¡œ ë§›ì§‘ ë“±ë¡í•˜ê¸°',
              style: TextStyle(
                fontSize: 18,
                fontWeight: FontWeight.bold,
              ),
            ),
          ],
        ),
      ),
    );
  }
}
```

### [ì„ íƒ] íŠ¹ë³„ ì•Œë¦¼ íš¨ê³¼

```dart
// íŒŒì¼: lib/feature/splash/presentation/widgets/special_event_overlay.dart
class SpecialEventOverlay extends StatefulWidget {
  final String eventType;

  const SpecialEventOverlay({
    super.key,
    required this.eventType,
  });

  @override
  State<SpecialEventOverlay> createState() => _SpecialEventOverlayState();
}

class _SpecialEventOverlayState extends State<SpecialEventOverlay>
    with SingleTickerProviderStateMixin {
  late AnimationController _controller;

  @override
  void initState() {
    super.initState();
    _controller = AnimationController(
      duration: const Duration(seconds: 2),
      vsync: this,
    )..repeat();
  }

  @override
  Widget build(BuildContext context) {
    return AnimatedBuilder(
      animation: _controller,
      builder: (context, child) {
        return Container(
          alignment: Alignment.center,
          child: Text(
            widget.eventType == 'festival' ? 'ğŸŠ ì¶•ì œ ì§„í–‰ì¤‘!' : 'â­ ëŒ€ì¥ê¸ˆ ê·¼ì²˜!',
            style: TextStyle(
              fontSize: 24,
              fontWeight: FontWeight.bold,
              color: Colors.white,
              shadows: [
                Shadow(
                  color: Colors.orange,
                  blurRadius: 20 * _controller.value,
                ),
              ],
            ),
          ),
        );
      },
    );
  }
}
```

## 6. ê²€ì¦

### âœ… ì²´í¬ë¦¬ìŠ¤íŠ¸

- [ ] ìœ„ì¹˜ ê¶Œí•œ ìš”ì²­ ì •ìƒ ë™ì‘
- [ ] ë‚ ì”¨ ì •ë³´ í‘œì‹œ í™•ì¸
- [ ] ë‚ ì”¨ë³„ ë°°ê²½ ê·¸ë¼ë°ì´ì…˜ í™•ì¸
- [ ] ë¡œê·¸ì¸/ë¹„ë¡œê·¸ì¸ ìƒíƒœ êµ¬ë¶„
- [ ] í”¼ë“œ ë°”ë¡œê°€ê¸° ë²„íŠ¼ ë™ì‘
- [ ] 2ì´ˆ í›„ ìë™ í™”ë©´ ì „í™˜

### [í•„ìˆ˜] ê¶Œí•œ ì„¤ì •

```xml
<!-- Android: android/app/src/main/AndroidManifest.xml -->
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />

<!-- iOS: ios/Runner/Info.plist -->
<key>NSLocationWhenInUseUsageDescription</key>
<string>í˜„ì¬ ìœ„ì¹˜ì˜ ë‚ ì”¨ ì •ë³´ë¥¼ í‘œì‹œí•˜ê¸° ìœ„í•´ ìœ„ì¹˜ ì •ë³´ê°€ í•„ìš”í•©ë‹ˆë‹¤.</string>
```
